<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Pokémon GO - Calendrier Dynamique</title>
<style>
  body { font-family: Arial, sans-serif; margin:30px; background:#f8f9fa; color:#333; }
  h1 { text-align:center; color:#222; margin:0; }
  .container { max-width:950px; margin:auto; padding:25px; background:#fff; border-radius:15px; box-shadow:0 4px 15px rgba(0,0,0,0.1);}
  .section { padding:15px; border:1px solid #ccc; border-radius:12px; margin-bottom:20px; background:#fafafa; }
  .section h2 { margin-top:0; margin-bottom:8px; color:#1565c0; font-size:1.2em; }
  .section p, .section ol { margin:0; font-size:0.95em; line-height:1.5; }

  /* Grille des tags */
  .tags-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px; }
  .tag { padding:12px; border-radius:10px; display:flex; align-items:center; transition:0.3s; border:2px solid #000; cursor:pointer; }
  .tag input { transform:scale(1.2); margin-right:8px; }
  .tag label { font-weight:bold; cursor:pointer; }
  .tag:hover { transform:scale(1.05); box-shadow:0 0 12px rgba(0,150,255,0.6); }

  button { display:block; margin:20px auto; padding:12px 20px; background:#1565c0; color:white; border:none; border-radius:8px; cursor:pointer; font-size:16px; font-weight:bold; transition:0.3s; }
  button:hover { background:#0d47a1; }

  #linkContainer { margin-top:20px; text-align:center; font-size:0.95em; word-break:break-all; }
  #linkContainer div { display:flex; justify-content:center; align-items:center; gap:10px; background:#f1f1f1; padding:10px; border-radius:8px; flex-wrap:wrap;}
  #linkContainer a { color:#1565c0; text-decoration:none; font-weight:bold; }
  #linkContainer a:hover { text-decoration:underline; }
  #linkContainer button { background:#1565c0; color:white; border:none; border-radius:5px; padding:5px 10px; cursor:pointer; font-size:0.85em; }

  /* Lexique */
  #lexique { margin-top:35px; overflow-x:auto; border:1px solid #000; border-radius:10px; }
  #lexique h3 { margin-bottom:12px; color:#444; text-align:center; padding-top:10px; }
  table { width:100%; border-collapse:collapse; font-size:0.9em; min-width:700px; }
  table th, table td { border:1px solid #000; padding:10px; text-align:left; transition:background 0.3s; }
  table th { background:#1565c0; color:white; text-align:center; }
  table tr:hover { cursor:pointer; }

  /* Couleurs tags / lexique harmonisées */
  .tag-RH, .lex-RH { background-color:#ffebee; }
  .tag-RB, .lex-RB { background-color:#ffe0b2; }
  .tag-PSH, .lex-PSH { background-color:#e1f5fe; }
  .tag-CD, .lex-CD { background-color:#e8f5e9; }
  .tag-GBL, .lex-GBL { background-color:#f3e5f5; }
  .tag-WA, .lex-WA { background-color:#fff9c4; }
  .tag-E, .lex-E { background-color:#fce4ec; }
  .tag-S, .lex-S { background-color:#d7ccc8; }
  .tag-MM, .lex-MM { background-color:#c8e6c9; }
  .tag-RD, .lex-RD { background-color:#ffccbc; }
  .tag-RW, .lex-RW { background-color:#d1c4e9; }
  .tag-GP, .lex-GP { background-color:#b3e5fc; }
  .tag-CS, .lex-CS { background-color:#ffe082; }

  .highlight { outline:3px solid #1565c0; transition: outline 0.3s; }

  /* Abbr badges */
  .abbr { padding:2px 6px; border-radius:4px; font-weight:bold; }

  /* Signature */
  footer { margin-top:40px; text-align:center; color:#666; font-size:0.9em; }

</style>
</head>
<body>
<div class="container">

  <!-- Titre -->
  <div class="section">
    <h2>Pokémon GO - Sélection des événements</h2>
  </div>

  <!-- Description -->
  <div class="section">
    <h2>Comment ajouter le calendrier</h2>
    <p><strong>iPhone / iOS :</strong></p>
    <ol>
      <li>Ouvrir l’app Calendrier → Comptes</li>
      <li>Ajouter un compte → Autre → Ajouter un calendrier avec abonnement</li>
      <li>Coller le lien ICS : <br><code>https://sneakyontv.github.io/pokemon-go-calendar-fr/calendar/gocal_fr.ics</code></li>
      <li>Valider → Le calendrier apparaît dans l’app Calendrier.</li>
      <li>Configurer les alertes : matin pour événements journée entière, 30–45 min avant pour les raids.</li>
    </ol>
    <p><strong>Android :</strong></p>
    <ol>
      <li>Obtenir le lien ICS.</li>
      <li>Ouvrir Google Calendar → Autres agendas → Ajouter par URL → Coller le lien ICS → Valider.</li>
      <li>Ouvrir l’appli Google Calendar : le calendrier apparaît automatiquement.</li>
      <li>Pour supprimer un événement ou un calendrier entier, suivre les étapes correspondantes dans Google Calendar.</li>
    </ol>
  </div>

  <!-- Section Tags -->
  <div class="section">
    <h2>Sélectionnez les tags</h2>
    <div class="tags-grid" id="tagsGrid"></div>
  </div>

  <button onclick="generateLink()">Générer mon calendrier</button>
  <div id="linkContainer"></div>

  <!-- Lexique -->
  <div id="lexique">
    <h3>Lexique des tags</h3>
    <table>
      <thead>
        <tr><th>Abréviation</th><th>Nom anglais</th><th>Nom français</th><th>Description</th></tr>
      </thead>
      <tbody id="lexiqueBody"></tbody>
    </table>
  </div>

  <footer>by SneakyOnTv</footer>
</div>

<script>
const tagsData=[
  {id:"RH",label:"Raid Hour",fr:"Heure de Raid",desc:"Raids spéciaux concentrés sur un Pokémon.",color:"#ffebee"},
  {id:"RB",label:"Raid Boss",fr:"Boss de Raid",desc:"Pokémon disponible en tant que boss de raid.",color:"#ffe0b2"},
  {id:"PSH",label:"Pokémon Spotlight Hour",fr:"Heure vedette Pokémon",desc:"Apparition accrue d’un Pokémon spécifique.",color:"#e1f5fe"},
  {id:"CD",label:"Community Day",fr:"Journée Communautaire",desc:"Événement avec un Pokémon vedette et des bonus spéciaux.",color:"#e8f5e9"},
  {id:"GBL",label:"GO Battle League",fr:"Ligue de Combat GO",desc:"Combats PvP avec règles et récompenses.",color:"#f3e5f5"},
  {id:"WA",label:"Wild Area",fr:"Zone Sauvage",desc:"Apparitions spéciales dans la nature.",color:"#fff9c4"},
  {id:"E",label:"Event",fr:"Événement",desc:"Événement global ou local.",color:"#fce4ec"},
  {id:"S",label:"Tales of Transformation",fr:"Transformation fabuleuse",desc:"Événement spécial avec des Pokémon et mécaniques uniques.",color:"#d7ccc8"},
  {id:"MM",label:"Max Monday",fr:"Lundi Max",desc:"Raids Dynamax spéciaux.",color:"#c8e6c9"},
  {id:"RD",label:"Raid Day",fr:"Journée de Raids",desc:"Raids concentrés sur un Pokémon particulier.",color:"#ffccbc"},
  {id:"RW",label:"Raid Weekend",fr:"Week-end de Raids",desc:"Raids intensifs sur plusieurs jours.",color:"#d1c4e9"},
  {id:"GP",label:"GO Pass",fr:"Passe GO",desc:"Suit votre progression pendant une période donnée.",color:"#b3e5fc"},
  {id:"CS",label:"City Safari",fr:"Safari en Ville",desc:"Événement spécial dans certaines villes.",color:"#ffe082"}
];

const tagsGrid=document.getElementById("tagsGrid");
const lexBody=document.getElementById("lexiqueBody");

tagsData.forEach(tag=>{
  // Tags
  const div=document.createElement("div");
  div.className=`tag tag-${tag.id}`;
  div.dataset.tag=tag.id;
  div.style.backgroundColor=tag.color;
  div.innerHTML=`<input type="checkbox" id="${tag.id}" value="${tag.id}"><label for="${tag.id}">[${tag.id}] ${tag.label}</label>`;
  tagsGrid.appendChild(div);

  // Lexique
  const tr=document.createElement("tr");
  tr.className=`lex-${tag.id}`;
  tr.dataset.tag=tag.id;
  tr.style.backgroundColor=tag.color;
  tr.innerHTML=`<td class="abbr" style="background:${tag.color}">[${tag.id}]</td><td>${tag.label}</td><td>${tag.fr}</td><td>${tag.desc}</td>`;
  lexBody.appendChild(tr);
});

// Générer le lien
function generateLink(){
  const selected=Array.from(document.querySelectorAll('input[type=checkbox]:checked')).map(e=>e.value);
  if(selected.length===0){ alert("Veuillez cocher au moins un événement !"); return; }
  const url="https://pokemon-go-calendar-fr.vercel.app/api/calendar?tags="+encodeURIComponent(selected.join(","));
  const container=document.getElementById("linkContainer");
  container.innerHTML=`<div>Voici votre lien ICS : <a href="${url}" target="_blank">${url}</a>
  <button onclick="copyLink('${url}')">Copier le lien</button></div>`;
}

// Copier lien
function copyLink(url){ navigator.clipboard.writeText(url).then(()=>alert("Lien copié !")).catch(()=>alert("Impossible de copier le lien.")); }

// Hover tags <-> lexique
document.querySelectorAll('.tag').forEach(tag=>{
  tag.addEventListener('mouseenter',()=>highlightTag(tag.dataset.tag,true));
  tag.addEventListener('mouseleave',()=>highlightTag(tag.dataset.tag,false));
});
document.querySelectorAll('tr').forEach(row=>{
  row.addEventListener('mouseenter',()=>highlightTag(row.dataset.tag,true));
  row.addEventListener('mouseleave',()=>highlightTag(row.dataset.tag,false));
});

function highlightTag(tag,state){
  if(!tag) return;
  document.querySelectorAll(`[data-tag="${tag}"]`).forEach(el=>{
    if(state) el.classList.add('highlight');
    else el.classList.remove('highlight');
  });
}

// Synchro checkbox <-> lexique highlight
document.querySelectorAll('input[type=checkbox]').forEach(cb=>{
  cb.addEventListener('change',()=>{
    const rows=document.querySelectorAll(`.lex-${cb.value}`);
    rows.forEach(r=>{ if(cb.checked) r.classList.add('highlight'); else r.classList.remove('highlight'); });
  });
});
</script>
</body>
</html>
