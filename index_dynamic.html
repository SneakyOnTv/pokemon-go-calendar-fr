<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Pokémon GO - Calendrier Filtrable Dynamique</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
    background-color: #f0f4f8;
    color: #333;
  }
  h1 { text-align:center; color:#222; margin-bottom:15px; text-decoration: underline; }
  .container { max-width:950px; margin:auto; padding:20px; background:#fff; border-radius:15px; box-shadow:0 6px 20px rgba(0,0,0,0.15); }

  /* Section Titre, Description, Tags */
  .section { padding:20px; margin-bottom:20px; background:#e3f2fd; border-radius:12px; }
  .section h2 { text-align:center; color:#1565c0; margin-bottom:15px; text-decoration: underline; color:#222; }
  .platform-block { max-width:850px; margin:15px auto; text-align:left; }
  .section h3 { text-align:center; color:#1565c0; margin-bottom:10px; }
  .separator { border-top:2px solid #90caf9; margin:20px 0; }

  /* Grille de tags */
  .tags-grid {
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap:12px;
    padding:15px;
    background:#e3f2fd;
    border-radius:12px;
    margin-bottom:20px;
  }
  .tag {
    padding:12px;
    border-radius:10px;
    display:flex;
    justify-content:center;
    align-items:center;
    text-align:center;
    min-height:55px;
    transition:0.3s;
    border:2px solid #000;
    cursor:pointer;
    box-sizing:border-box;
  }
  .tag input { transform:scale(1.2); margin-right:8px; }
  .tag label { font-weight:bold; cursor:pointer; }
  .tag:hover { transform:scale(1.05); box-shadow:0 0 12px rgba(0,150,255,0.6); }

  /* Bouton générer */
  button {
    display:block;
    margin:15px auto;
    padding:12px 20px;
    background:#1565c0;
    color:white;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-size:16px;
    font-weight:bold;
    transition:0.3s;
  }
  button:hover { background:#0d47a1; }

  /* Container lien ICS */
  #linkContainer { margin-top:20px; text-align:center; font-size:0.95em; }
  #linkContainer div {
    background:#f1f1f1;
    padding:10px;
    border-radius:8px;
    display:inline-block;
  }
  #linkContainer button {
    background:#1565c0;
    color:white;
    border:none;
    border-radius:5px;
    padding:5px 10px;
    margin-left:10px;
    cursor:pointer;
    font-size:0.85em;
  }
  #linkContainer button:hover { background:#0d47a1; }
  #linkContainer a { color:#1565c0; text-decoration:none; font-weight:bold; }
  #linkContainer a:hover { text-decoration:underline; }

  /* Lexique */
  #lexique { margin-top:25px; overflow-x:auto; background:#e3f2fd; padding:15px; border-radius:12px; }
  #lexique h3 { margin-bottom:12px; color:#444; text-align:center; }
  table { width:100%; border-collapse:collapse; min-width:750px; border:2px solid #000; }
  table th, table td { border:1px solid #ddd; padding:10px; text-align:center; transition:background 0.3s, transform 0.2s; }
  table th { background:#1565c0; color:white; }
  table tr:hover { transform:scale(1.01); background:rgba(21,101,192,0.2); cursor:pointer; }

  /* Couleurs tags / lexique */
  .tag-RH, .lex-RH { background-color:#ffebee; }
  .tag-RB, .lex-RB { background-color:#ffe0b2; }
  .tag-PSH, .lex-PSH { background-color:#e1f5fe; }
  .tag-CD, .lex-CD { background-color:#e8f5e9; }
  .tag-GBL, .lex-GBL { background-color:#f3e5f5; }
  .tag-WA, .lex-WA { background-color:#fff9c4; }
  .tag-E, .lex-E { background-color:#fce4ec; }
  .tag-S, .lex-S { background-color:#d7ccc8; }
  .tag-MM, .lex-MM { background-color:#c8e6c9; }
  .tag-RD, .lex-RD { background-color:#ffccbc; }
  .tag-RW, .lex-RW { background-color:#d1c4e9; }
  .tag-GP, .lex-GP { background-color:#b3e5fc; }
  .tag-CS, .lex-CS { background-color:#ffe082; }

  .highlight { outline:3px solid #1565c0; }

  /* Abbr badge taille réduite */
  .abbr { padding:2px 6px; border-radius:4px; font-size:0.8em; font-weight:bold; display:inline-block; text-align:center }

  /* Signature */
  footer { margin-top:30px; text-align:center; color:#666; font-size:0.9em; }
</style>
</head>
<body>
<div class="container">
  <h1>Pokémon GO - Sélection des événements (Dynamique)</h1>

  <!-- Description -->
  <div class="section">
    <h2>Comment ajouter le calendrier</h2>
    <div class="platform-block">
      <h3>iPhone / iOS</h3>
      <ol>
        <li>Réglage → Ouvrir l’app Calendrier → Comptes.</li>
        <li>Ajouter un compte → Autre → Ajouter un calendrier avec abonnement.</li>
        <li>Coller le lien ICS générer.</li>
        <li>Valider → Le calendrier apparaît dans l’app Calendrier.</li>
        <li>Configurer les alertes : matin pour événements journée entière, 30–45 min avant pour les raids.</li>
      </ol>
    </div>
    <div class="separator"></div>
    <div class="platform-block">
      <h3>Android</h3>
      <ol>
        <li>Obtenir le lien ICS générer.</li>
        <li>Ouvrir Google Calendar → Autres agendas → Ajouter par URL → Coller le lien ICS → Valider.</li>
        <li>Ouvrir l’appli Google Calendar : le calendrier apparaît automatiquement.</li>
        <li>Pour supprimer un événement ou un calendrier entier, suivre les étapes correspondantes dans Google Calendar.</li>
      </ol>
    </div>
  </div>

  <!-- Grille de tags -->
  <div class="tags-grid">
    <div class="tag tag-GP"><input type="checkbox" id="GP"><label for="GP">[GP] GO Pass</label></div>
    <div class="tag tag-E"><input type="checkbox" id="E"><label for="E">[E] Event</label></div>
    <div class="tag tag-RB"><input type="checkbox" id="RB"><label for="RB">[RB] Raid Boss</label></div>
    <div class="tag tag-RH"><input type="checkbox" id="RH"><label for="RH">[RH] Raid Hour</label></div>
    <div class="tag tag-MM"><input type="checkbox" id="MM"><label for="MM">[MM] Max Monday</label></div>
    <div class="tag tag-RD"><input type="checkbox" id="RD"><label for="RD">[RD] Raid Day</label></div>
    <div class="tag tag-RW"><input type="checkbox" id="RW"><label for="RW">[RW] Raid Weekend</label></div>
    <div class="tag tag-GBL"><input type="checkbox" id="GBL"><label for="GBL">[GBL] GO Battle League</label></div>
    <div class="tag tag-PSH"><input type="checkbox" id="PSH"><label for="PSH">[PSH] Pokémon Spotlight Hour</label></div>
    <div class="tag tag-CD"><input type="checkbox" id="CD"><label for="CD">[CD] Community Day</label></div>
    <div class="tag tag-WA"><input type="checkbox" id="WA"><label for="WA">[WA] Wild Area</label></div>
    <div class="tag tag-CS"><input type="checkbox" id="CS"><label for="CS">[CS] City Safari</label></div>
    <div class="tag tag-S"><input type="checkbox" id="S"><label for="S">[S] Tales of Transformation</label></div>
  </div>

  <button onclick="generateLink()">Générer mon calendrier</button>
  <p id="linkContainer"></p>

  <!-- Lexique -->
  <div id="lexique">
    <h3>Lexique des tags</h3>
    <table>
      <thead>
        <tr><th>Abréviation</th><th>Nom anglais</th><th>Nom français</th><th>Description</th></tr>
      </thead>
      <tbody>
        <tr class="lex-GP" data-tag="GP"><td class="abbr">[GP]</td><td>GO Pass</td><td>Passe GO</td><td>Suit votre progression pendant une période donnée.</td></tr>
        <tr class="lex-E" data-tag="E"><td class="abbr">[E]</td><td>Event</td><td>Événement</td><td>Événement global ou local.</td></tr>
        <tr class="lex-RB" data-tag="RB"><td class="abbr">[RB]</td><td>Raid Boss</td><td>Boss de Raid</td><td>Pokémon disponible en tant que boss de raid.</td></tr>
        <tr class="lex-RH" data-tag="RH"><td class="abbr">[RH]</td><td>Raid Hour</td><td>Heure de Raid</td><td>Raids spéciaux concentrés sur un Pokémon.</td></tr>
        <tr class="lex-MM" data-tag="MM"><td class="abbr">[MM]</td><td>Max Monday</td><td>Lundi Max</td><td>Raids Dynamax spéciaux.</td></tr>
        <tr class="lex-RD" data-tag="RD"><td class="abbr">[RD]</td><td>Raid Day</td><td>Journée de Raids</td><td>Raids concentrés sur un Pokémon particulier.</td></tr>
        <tr class="lex-RW" data-tag="RW"><td class="abbr">[RW]</td><td>Raid Weekend</td><td>Week-end de Raids</td><td>Raids intensifs sur plusieurs jours.</td></tr>
        <tr class="lex-GBL" data-tag="GBL"><td class="abbr">[GBL]</td><td>GO Battle League</td><td>Ligue de Combat GO</td><td>Combats PvP avec règles et récompenses.</td></tr>
        <tr class="lex-PSH" data-tag="PSH"><td class="abbr">[PSH]</td><td>Pokémon Spotlight Hour</td><td>Heure vedette Pokémon</td><td>Apparition accrue d’un Pokémon spécifique.</td></tr>
        <tr class="lex-CD" data-tag="CD"><td class="abbr">[CD]</td><td>Community Day</td><td>Journée Communautaire</td><td>Événement avec un Pokémon vedette et des bonus spéciaux.</td></tr>
        <tr class="lex-WA" data-tag="WA"><td class="abbr">[WA]</td><td>Wild Area</td><td>Zone Sauvage</td><td>Apparitions spéciales dans la nature.</td></tr>
        <tr class="lex-CS" data-tag="CS"><td class="abbr">[CS]</td><td>City Safari</td><td>Safari en Ville</td><td>Événement spécial dans certaines villes.</td></tr>
        <tr class="lex-S" data-tag="S"><td class="abbr">[S]</td><td>Tales of Transformation</td><td>Transformation fabuleuse</td><td>Événement spécial avec des Pokémon et mécaniques uniques.</td></tr>
      </tbody>
    </table>
  </div>

  <footer>by SneakyOnTv</footer>
</div>

<script>
function generateLink() {
  const selectedTags = Array.from(document.querySelectorAll('.tags-grid input:checked')).map(e=>e.id);
  if(selectedTags.length===0){alert("Veuillez cocher au moins un événement !"); return;}
  const finalURL = "https://pokemon-go-calendar-fr.vercel.app/api/calendar?tags=" + selectedTags.join(",");
  const container = document.getElementById("linkContainer");
  container.innerHTML = `<div style="text-align:center;">Voici votre lien ICS : <a href="${finalURL}" target="_blank">${finalURL}</a><br>
  <button onclick="copyLink('${finalURL}')">Copier le lien</button></div>`;
}
function copyLink(url){navigator.clipboard.writeText(url).then(()=>alert("Lien copié !")).catch(()=>alert("Impossible de copier le lien."));}

document.querySelectorAll('#lexique table tr').forEach(row=>{
  row.addEventListener('click', ()=>{
    const tag=row.dataset.tag;
    const checkbox=document.getElementById(tag);
    if(checkbox) checkbox.checked=!checkbox.checked;
    const rows=document.querySelectorAll(`.lex-${tag}`);
    rows.forEach(r=>{if(checkbox.checked) r.classList.add('highlight'); else r.classList.remove('highlight');});
  });
});
</script>
</body>
</html>
